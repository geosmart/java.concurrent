取消与关闭
---
>任务和线程的启动很容易，但是如何`安全、快速、可靠`的`停止`下来？
>生命周期结束（`End-of-LifeCycle`）的问题会使任务、服务以及程序的设计和实现等过程变得复杂，而这个在程序设计中非常重要的要素却经常被忽略。
>一个在行为良好的软件与勉强运行的软件之家的最主要的区别就是，行为良好的软件能很完善的处理失败、关闭和取消等过程；
>本章将给如各种实现`取消`和`中断`的机制，以及如何编写任务和服务，使他们能对取消请求做出响应；
<!-- TOC -->

- [任务取消](#任务取消)
    - [中断](#中断)
    - [中断策略](#中断策略)
    - [响应中断](#响应中断)
    - [示例：计时运行](#示例计时运行)
    - [通过Future来实现取消](#通过future来实现取消)
    - [处理不可中断的阻塞](#处理不可中断的阻塞)
    - [采用newTaskFor来封装非标准的取消](#采用newtaskfor来封装非标准的取消)
- [停止基于线程的服务](#停止基于线程的服务)
    - [示例：日志服务](#示例日志服务)
    - [关闭ExecutorService](#关闭executorservice)
    - [`毒丸`对象](#毒丸对象)
    - [示例：只执行一次的服务](#示例只执行一次的服务)
    - [shutdownNow的局限性](#shutdownnow的局限性)
- [处理非正常的线程终止](#处理非正常的线程终止)
- [JVM关闭](#jvm关闭)
    - [关闭钩子](#关闭钩子)
    - [守护线程](#守护线程)
    - [终结器](#终结器)
- [小结](#小结)

<!-- /TOC -->
# 任务取消
## 中断
## 中断策略
## 响应中断
## 示例：计时运行
## 通过Future来实现取消
## 处理不可中断的阻塞
## 采用newTaskFor来封装非标准的取消

# 停止基于线程的服务
## 示例：日志服务
## 关闭ExecutorService
## `毒丸`对象
## 示例：只执行一次的服务
## shutdownNow的局限性

# 处理非正常的线程终止
# JVM关闭
## 关闭钩子
## 守护线程
## 终结器

# 小结
